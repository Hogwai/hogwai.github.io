---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header';
import Footer from '../../components/Footer';
import NotesSearchAndFilter from '../../components/NotesSearchAndFilter';
import { getCollection } from 'astro:content';

const notes = (await getCollection('notes'))
  .filter(note => !note.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title="Notes" description="Quick fixes, snippets and setup tips â€” short-form technical notes.">
  <Header client:visible />

  <main id="main-content" class="flex-grow bg-page">
    <div class="container-custom py-12">
      <div class="mb-8">
        <h1 class="text-4xl md:text-5xl font-bold mb-2 text-ink">Notes</h1>
        <p class="text-ink">Quick fixes, snippets and setup tips.</p>
      </div>

      <NotesSearchAndFilter notes={notes} client:visible />
    </div>
  </main>

  <Footer />
</BaseLayout>
